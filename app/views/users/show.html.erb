<%= render @user %>

<% if not @user.active %>
  <span class="badge bg-danger">closed</span>
<% end %>

<p>Has made <%= @user.ratings.count %> <%= 'rating'.pluralize(@user.ratings.count) %>, average rating <%= round(@user.average_rating) %> </p>
<p>Favorite style beer:  <%= @user.favorite_style %></p>
<p>Favorite brewery:  <%= @user.favorite_brewery %></p>

<% if admin %>
  <% if @user.active%>
    <p><%= button_to "Close account ", toggle_activity_user_path(@user.id), data: {turbo_method: "post"}, class: "btn btn-danger" %></p>
  <% else %>
    <p><%= button_to "Open account", toggle_activity_user_path(@user.id), data: {turbo_method: "post"}, class: "btn btn-primary" %></p>
  <% end %>
<% end%>

<p><strong>Beer club memberships:</strong></p>

<div>
  <ul>
    <% @user.beer_clubs.each do |club| %>
      <li><%= link_to club.name, club %></li>
    <% end %>
  </ul>
</div>

<p><strong>Ratings:</strong></p>

<ul>
  <% @user.ratings.each do |rating| %>
    <li><%= "#{rating.to_s}" %>
      <% if @user == current_user %>
        <%= button_to 'delete', rating, method: :delete, form: { style: 'display:inline-block;',  data: { 'turbo-confirm': 'Are you sure?' }} %>
      <% end %>
    </li>
  <% end %>
</ul>

<div>
  <% if @user == current_user %>
    <%= edit_and_destroy_buttons(@user) %>
  <% end %>

  <p><%= link_to "Back to users", users_path %></p>
</div>
